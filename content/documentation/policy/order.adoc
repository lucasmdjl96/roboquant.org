= Orders
:source-highlighter: rouge
:icons: font
:jbake-date: 2020-01-15

== Order Types
The following diagram shows which orders are supported out of the box:

image::order_types.png[]

All orders refer to a single asset, including advanced order types like BracketOrders. The reason for putting this rule
in place is that real brokers only have limited support for multi-asset orders and this could lead to issues that are only discovered during live trading. Additionally, it makes back testing difficult if the price for one asset is known but not for the other.

== Creating Orders
The used `Policy` implementation is responsible for creating the orders. This can be based on the received signals from the `Strategy`, but can also be done for other reasons (like for example cyclic portfolio re-balancing)

An example on how to convert a `Signal` into a `MarketOrder`:

[source, kotlin]
----
val orders = mutableMapOf<Order>()
for (signal in signals) {
    val qty = if (signal.positive) 100.0 else -100.0
    val order = MarketOrder(signal.asset, qty)
    orders.add(order)
}
----


TIP: make sure to only use order types during back testing that are also supported by the broker you want to use for live trading.


== TIF (Time In Force)
TIF sets an execution policy for an order under which conditions the order remains valid. Roughly speaking, there are two types of TIF:

. Time based, defining how long the order stays valid. Two common ones are GTD (Good Till Day) and GTC (Good Till Cancelled)
. Fill based, defining under what fill conditions the order stays valid. A common one if FOK (Fill Or Kill)

The default TIF used in none is specified is GTC (Good Till Cancelled).


== Custom Order Types
Orders can be extended with own order types if the ones that come out of the box are not sufficient. The two steps required to make to use yor own order types are:

. Implement the `Order` abstract class and add the desired logic for your new order type
. Create these new order types in your policy

Since the execution logic of an order is within the `Order` class itself, the new `Order` type will be automatically processed by hte SimBroker. There are no changes required to other components.



