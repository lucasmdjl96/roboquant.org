<!DOCTYPE html>
<html lang="en">
     <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="roboquant algo-trading framework" />
    <meta name="keywords" content="trading Kotlin algo roboquant">
    <title>roboquant - design</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="/img/favicon.png" />
    <!-- Bootstrap icons-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="/css/styles.css" rel="stylesheet" />
</head>    <body class="d-flex flex-column">
<link rel="stylesheet" href="/css/gh-fork-ribbon.min.css" />
<a class="github-fork-ribbon" href="https://github.com/neurallayer/roboquant" data-ribbon="Fork me on GitHub" title="Fork me on GitHub">Fork me on GitHub</a>        <main class="flex-shrink-0">
            <!-- Navigation-->
 <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container px-5">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                <li class="nav-item"><a class="nav-link" href="/index.html">Home</a></li>
                <li class="nav-item"><a class="nav-link" href="/get_started.html">Get Started</a></li>
                <li class="nav-item"><a class="nav-link" href="/documentation/index.html">Documentation</a></li>
                <li class="nav-item"><a class="nav-link" href="/screenshots.html">Screenshots</a></li>
                <li class="nav-item"><a class="nav-link" href="/community.html">Community</a></li>
            </ul>
        </div>
    </div>
</nav>              <header class="masthead bg-primary text-white text-center">
                     <div class="container d-flex align-items-center flex-column">
                         <div class="row gx-5">
                            <div class="col-lg-4 mb-5 mb-lg-0">
                                <img class="mb-2 masthead-avatar" src="/img/avatar.png" alt="roboquant avatar">
                            </div>
                            <div class="col-lg-8">
                                <h3 class="masthead-subheading font-weight-light mt-3">testing leads to failure,<br> and failure leads to understanding</h3>
                            </div>
                         </div>
                     </div>
                 </header>
            <!-- Page content-->
            <section class="py-3">
                <div class="container-sm px-5 my-5">
                     <h1>Design decisions</h1>
<p>This document provides an overview of the high level design choices, and the rational why they were made. It is<br />
provided mainly as background information. And it can also help to decide if roboquant is the right solution for you.</p>
<h2>Why develop a new framework</h2>
<p>Before we start developing roboquant, we of course looked at existing frameworks to see if these could fit the bill.<br />
However for our use-cases none of them checked the boxes that we required:</p>
<ul>
<li>Trade assets in multiple currencies at the same time</li>
<li>Support many asset classes including crypto-currencies</li>
<li>Solid live trading, including support for advanced order types to reduce risk</li>
<li>Deal with large volumes of data and run extensive back-tests</li>
<li>Support for trading in multiple markets in different regions at the same time</li>
</ul>
<h2>Why use Kotlin</h2>
<p>There are many computer languages available to choose from. After having developed several prototypes in different languages,<br />
we decided to go with Kotlin. Some main benefits being:</p>
<ul>
<li>Easy to learn and use with excellent tooling support</li>
<li>It is very concise with almost no boilerplate code required</li>
<li>You can use it both within Jupyter Notebooks and traditional IDE's</li>
<li>Fast enough to even handle the largest data sets during back testing</li>
<li>Access to the huge Java ecosystem with a library available for almost any task at hand</li>
<li>Excellent for building robust software, a necessity when developing complex trading strategies and your own money is at risk</li>
</ul>
<h4>Why not Python</h4>
<p>One often asked question is &quot;Why didn't you use Python instead?&quot;. The truth to be said, we would have loved to be able<br />
to use Python. However, during the prototype phase we discovered that the performance was lacking too much for our<br />
use-cases. This was including using libraries like Numpy and Pandas and even some Cython to speedup processing<br />
where possible.</p>
<p>The main reason for this lackluster performance is not only the language itself. But also the fact that using all<br />
the cores found on modern CPU's is difficult to do with Python without a lot of overhead.</p>
<p>The good news is that if you really want to stick with Python, there are plenty of alternatives available. For example,<br />
you could have a look at backtrader, pyalgotrade or zipline.</p>
<h2>Interactive and traditional development</h2>
<p>From the start we developed <em>roboquant</em> to be used either as a library included in your application or interactively<br />
from a Jupyter notebook. The various API's have been designed so that they support both use-cases.</p>
<p>Where many Java based applications require a lot of ceremony to implement even the simplest piece of functionality,<br />
<em>roboquant</em> it designed to remove most of that. Especially in a Jupyter notebook environment, it is very<br />
easy to get started:</p>
<ul>
<li>Almost no imports required</li>
<li>No explicit type info need to be provided</li>
<li>Out of the box powerfull charts</li>
</ul>
<h2>Modules</h2>
<p>In order to keep the project manageable and also reduce the download sizes, roboquant is divided into a number<br />
of distinct modules:</p>
<ul>
<li>roboquant-core: all the functionality required for back testing a strategy</li>
<li>roboquant-extra: adds support for data feeds and 3rd party brokers</li>
<li>roboquant-crypto: adds support for cryptocurrency feeds and exchanges</li>
<li>roboquant-ml: adds support for machine learning strategies. This is a huge module because the dependent packages tend<br />
to be very large</li>
</ul>
<p>This approach allows people with limited hardware to only load the modules required.</p>
<h2>Time handling</h2>
<p>When testing strategies that trade simultaneously in multiple timezones, like stocks in New York and London, it is key<br />
to have proper time management. Otherwise, you run the risk that your strategy performs very well but only because<br />
it can peep into the future due to faulty handling of timezones.</p>
<p>Because of that, roboquant internally only uses the Java Instant type to represent a moment in time. So all time events<br />
can be easily compared without having to consider time zones.</p>
<p>When importing data, there is functionality to convert the data from timezone specific value towards the Instant type.<br />
When displaying time related information, it can be converted back the other way around if desired.</p>
<p>But the fact remains that all internal logic relies only on the Instant type in order to prevent timezone mistakes from<br />
happening.</p>
<h2>Performance</h2>
<p>With data sets growing, it is important that a strategy can still be quickly evaluated and tuned when required. If this<br />
develop-test cycle becomes too slow, it is nearly impossible to create high performing strategies.</p>
<ul>
<li>
<p>Roboquant isn't setup to be a ledger and does not require the same accuracy when it comes to trading data. The native<br />
Double type provides enough precision for any trading purpose and there is no need to use (the much slower and<br />
memory hungry) BigDecimal type.</p>
</li>
<li>
<p>The data Feed API supports data that is kept in-memory as well data that is stored on disk and only accessed when<br />
required. This allows for running back test where the test data doesn't fit in memory or running back-tests<br />
on machines with limited memory. In fact roboquant can be used on a JVM with only 1 gigabyte of heap allocated.</p>
</li>
<li>
<p>Many of the builtin features support multi-core machines to speedup processing. For example the CSV parser can<br />
parse CSV files in parallel so even directories with thousands of CSV files can be parsed in seconds.</p>
</li>
<li>
<p>Avoid (auto)boxing, so the JVM can access these variables directly. This means where possible use native types and<br />
not the wrapper one. See <a href="https://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html">background</a></p>
</li>
<li>
<p>Overall the latency is kept very low when processing a new event and generating a signal and order. So it is feasible to<br />
to create fast, low latency (sub-second) trading strategies.</p>
</li>
</ul>
<h2>Reliability</h2>
<p>Even more important than performance, is reliability when it comes to trading software.</p>
<ul>
<li>All components can log information that is then available for audit and tracing</li>
<li>Type and null checks where possible to leverage the compiler to identify possible mistakes</li>
<li>Extensive error logging to alert possible issues, including data quality</li>
<li>Assert/requires to validate input parameters</li>
<li>Good unit test suite to cover much of the code base</li>
<li>Proven third party libraries</li>
</ul>

               </div>
            </section>
        </main>
        <!-- Footer-->
<footer class="bg-dark py-4 mt-auto">
    <div class="container px-5">
        <div class="row align-items-center justify-content-between flex-column flex-sm-row">
            <div class="col-auto"><div class="small m-0 text-white">Copyright &copy; roboquant.org 2021</div></div>
            <div class="col-auto">
                <a class="link-light small" href="/community.html">Contact</a>
            </div>
        </div>
    </div>
</footer>
<!-- Bootstrap core JS-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script>
    </body>
</html>
