<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="roboquant algo-trading framework" />
    <meta name="keywords" content="trading Kotlin algo roboquant">
    <meta name="theme-color" content="#3296C8">
    <title>roboquant - Currencies</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="/img/favicon.png" />
    <!-- Font awesome icons-->
    <link href="/css/asciidoctor.css" rel="stylesheet" />
    <link href="/css/rouge_github.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/v4-shims.css" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="/css/styles.css" rel="stylesheet" />
</head>
    <body class="d-flex flex-column">
        <main class="flex-shrink-0">
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container px-5">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                <li class="nav-item"><a class="nav-link" href="/index.html">Home</a></li>
                <li class="nav-item"><a class="nav-link" href="/get_started.html">Get Started</a></li>
                <li class="nav-item"><a class="nav-link" href="/documentation/introduction/index.html">Documentation</a></li>
                <li class="nav-item"><a class="nav-link" href="/screenshots.html">Screenshots</a></li>
                <li class="nav-item"><a class="nav-link" href="/community.html">Community</a></li>
            </ul>
        </div>
    </div>
</nav>
              <header class="masthead bg-primary text-white text-center">
                     <div class="container px-5 my-1">
                         <div class="row gx-5">
                            <div class="col-lg-4 mb-5 mb-lg-0">
                            </div>
                             <div class="col-lg-8">
                                 <div class="col h-100">
                                    <h1 class="font-weight-light mt-1 doc">Currencies</h1>
                                 </div>
                             </div>
                         </div>
                     </div>
                 </header>

            <section class="py-5">
                <div class="container px-5 my-1">
                    <div class="row gx-5">
                        <div class="col-lg-4 mb-5 mb-lg-0">
<nav id="sidebar">
    <h3>Documentation</h3>
        <details >
            <summary>introduction</summary>
            <ul class="nav flex-column">
                 <li class="nav-item"><a href="/documentation/introduction/index.html" class="nav-link">Welcome</a></li>
                 <li class="nav-item"><a href="/documentation/introduction/four_stages.html" class="nav-link">The 4 Stages</a></li>
                 <li class="nav-item"><a href="/documentation/introduction/events.html" class="nav-link">Event Driven</a></li>
                 <li class="nav-item"><a href="/documentation/introduction/features.html" class="nav-link">Features</a></li>
                 <li class="nav-item"><a href="/documentation/introduction/glossary.html" class="nav-link">Glossary</a></li>
                 <li class="nav-item"><a href="/documentation/introduction/design.html" class="nav-link">Design Decisions</a></li>
            </ul>
        </details>
        <details >
            <summary>installation</summary>
            <ul class="nav flex-column">
                 <li class="nav-item"><a href="/documentation/installation/index.html" class="nav-link">Install roboquant</a></li>
            </ul>
        </details>
        <details >
            <summary>roboquant</summary>
            <ul class="nav flex-column">
                 <li class="nav-item"><a href="/documentation/roboquant/index.html" class="nav-link">Roboquant</a></li>
            </ul>
        </details>
        <details >
            <summary>feed</summary>
            <ul class="nav flex-column">
                 <li class="nav-item"><a href="/documentation/feed/index.html" class="nav-link">Feed</a></li>
                 <li class="nav-item"><a href="/documentation/feed/csv.html" class="nav-link">CSV Feed</a></li>
                 <li class="nav-item"><a href="/documentation/feed/avro.html" class="nav-link">Avro Feed</a></li>
            </ul>
        </details>
        <details >
            <summary>strategy</summary>
            <ul class="nav flex-column">
                 <li class="nav-item"><a href="/documentation/strategy/index.html" class="nav-link">Strategy</a></li>
                 <li class="nav-item"><a href="/documentation/strategy/signal.html" class="nav-link">Signal</a></li>
            </ul>
        </details>
        <details >
            <summary>policy</summary>
            <ul class="nav flex-column">
                 <li class="nav-item"><a href="/documentation/policy/index.html" class="nav-link">Policy</a></li>
                 <li class="nav-item"><a href="/documentation/policy/order.html" class="nav-link">Orders</a></li>
            </ul>
        </details>
        <details >
            <summary>broker</summary>
            <ul class="nav flex-column">
                 <li class="nav-item"><a href="/documentation/broker/index.html" class="nav-link">Broker</a></li>
                 <li class="nav-item"><a href="/documentation/broker/simbroker.html" class="nav-link">Simulated Broker</a></li>
                 <li class="nav-item"><a href="/documentation/broker/buyingpower.html" class="nav-link">Buying Power</a></li>
            </ul>
        </details>
        <details >
            <summary>metrics</summary>
            <ul class="nav flex-column">
                 <li class="nav-item"><a href="/documentation/metrics/index.html" class="nav-link">Metrics</a></li>
                 <li class="nav-item"><a href="/documentation/metrics/metrics_logger.html" class="nav-link">Metrics Logger</a></li>
            </ul>
        </details>
        <details >
            <summary>jupyter</summary>
            <ul class="nav flex-column">
                 <li class="nav-item"><a href="/documentation/jupyter/charts.html" class="nav-link">Charts</a></li>
                 <li class="nav-item"><a href="/documentation/jupyter/index.html" class="nav-link">Jupyter Notebooks</a></li>
            </ul>
        </details>
        <details open>
            <summary>multimarkets</summary>
            <ul class="nav flex-column">
                 <li class="nav-item"><a href="/documentation/multimarkets/currencies.html" class="nav-link">Currencies</a></li>
                 <li class="nav-item"><a href="/documentation/multimarkets/time.html" class="nav-link">Time</a></li>
            </ul>
        </details>
        <details >
            <summary>integration</summary>
            <ul class="nav flex-column">
                 <li class="nav-item"><a href="/documentation/integration/index.html" class="nav-link">Overview</a></li>
                 <li class="nav-item"><a href="/documentation/integration/alpaca.html" class="nav-link">Alpaca</a></li>
                 <li class="nav-item"><a href="/documentation/integration/ibkr.html" class="nav-link">Interactive Brokers</a></li>
                 <li class="nav-item"><a href="/documentation/integration/iex.html" class="nav-link">IEX Cloud</a></li>
                 <li class="nav-item"><a href="/documentation/integration/oanda.html" class="nav-link">OANDA</a></li>
                 <li class="nav-item"><a href="/documentation/integration/yahoo.html" class="nav-link">Yahoo</a></li>
                 <li class="nav-item"><a href="/documentation/integration/alphavantage.html" class="nav-link">Yahoo</a></li>
                 <li class="nav-item"><a href="/documentation/integration/crypto.html" class="nav-link">Crypto Exchanges</a></li>
            </ul>
        </details>
</nav>                         </div>
                        <div class="col-lg-8">
                            <div class="col h-100">
                                <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Roboquant has extensive support for trading in assets that have different currencies. So for example at the same time you can hold US stocks and EuroNext stocks in your portfolio and trade them.</p>
</div>
<div class="paragraph">
<p>In order to make it easier to develop in a multi-currency setup, roboquant introduces a number of domain classes: <a href="#_currency">Currency</a>, <a href="#_amount">Amount</a>, <a href="#_wallet">Wallet</a> and <a href="#_exchangerates">ExchangeRates</a> that will help.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_currency">Currency</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The roboquant <code>Currency</code> class represents any type of currency. It follows closely the interface that comes with the standard  Java Currency class, but is independent of it. The main reason is that the Java implementation doesn&#8217;t support cryptocurrencies while the roboquant implementation supports any type of currency.</p>
</div>
<div class="paragraph">
<p>Also several common currencies are predefined, to make it easier to work with.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="kotlin"><span class="nc">Currency</span><span class="p">.</span><span class="nc">USD</span>
<span class="nc">Currency</span><span class="p">.</span><span class="nc">BTC</span>
<span class="nc">Currency</span><span class="p">.</span><span class="nf">getInstance</span><span class="p">(</span><span class="s">"MyCryptoCoin"</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_amount">Amount</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An amount can hold the value for a single currency. You can create a new <code>Amount</code> using the constructor. But you can also use the extension functions that are defined on numbers for commonly used currencies (f.e. 120.EUR). Amounts are just like numbers immutable.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="kotlin"><span class="kd">val</span> <span class="py">amount1</span> <span class="p">=</span> <span class="nc">Amount</span><span class="p">(</span><span class="nc">Currency</span><span class="p">.</span><span class="nf">getInstance</span><span class="p">(</span><span class="s">"USD"</span><span class="p">),</span> <span class="mf">100.0</span><span class="p">)</span> <span class="c1">// the most code</span>
<span class="kd">val</span> <span class="py">amount2</span> <span class="p">=</span> <span class="nc">Amount</span><span class="p">(</span><span class="nc">Currency</span><span class="p">.</span><span class="nc">USD</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">)</span> <span class="c1">// less code</span>
<span class="kd">val</span> <span class="py">amount3</span> <span class="p">=</span> <span class="mi">100</span><span class="p">.</span><span class="nc">USD</span> <span class="c1">// the least code</span>

<span class="kd">val</span> <span class="py">amount4</span> <span class="p">=</span> <span class="mi">50</span><span class="p">.</span><span class="nc">USD</span> <span class="p">*</span> <span class="mi">2</span> <span class="c1">// simple calculation</span>
<span class="nf">require</span><span class="p">(</span><span class="n">amount4</span> <span class="p">==</span> <span class="n">amount3</span><span class="p">)</span>

<span class="nf">println</span><span class="p">(</span><span class="n">amount1</span><span class="p">.</span><span class="nf">formatValue</span><span class="p">())</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Amounts store their values internally as Doubles and not BigDecimals. For (simulated) trading the potential loss of precision is not an issue and the benefits are much better performance and lower memory consumption.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_wallet">Wallet</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A <code>Wallet</code> can hold amounts of multiple currencies at the same time. You can create a new <code>Wallet</code> by using its constructor, or by adding multiple amounts together. You can also deposit and withdraw amounts in a wallet. A <code>Wallet</code> instance is mutable.</p>
</div>
<div class="paragraph">
<p>There is an important difference between <code>deposit</code> method and using the <code>+ operator</code>. The <code>deposit</code> method will modify the existing instance while the <code>+ operator</code> will return a new wallet instance.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="kotlin"><span class="kd">val</span> <span class="py">wallet1</span> <span class="p">=</span> <span class="nc">Wallet</span><span class="p">(</span><span class="mi">100</span><span class="p">.</span><span class="nc">EUR</span><span class="p">,</span> <span class="mi">10</span><span class="p">.</span><span class="nc">USD</span><span class="p">)</span>
<span class="n">wallet1</span><span class="p">.</span><span class="nf">deposit</span><span class="p">(</span><span class="mi">200</span><span class="p">.</span><span class="nc">GBP</span><span class="p">)</span>
<span class="n">wallet1</span><span class="p">.</span><span class="nf">withdraw</span><span class="p">(</span><span class="mi">1000</span><span class="p">.</span><span class="nc">JPY</span><span class="p">)</span>

<span class="kd">val</span> <span class="py">wallet2</span> <span class="p">=</span> <span class="mi">20</span><span class="p">.</span><span class="nc">EUR</span> <span class="p">-</span> <span class="mi">1000</span><span class="p">.</span><span class="nc">JPY</span> <span class="p">+</span> <span class="mi">100</span><span class="p">.</span><span class="nc">GBP</span>
<span class="kd">val</span> <span class="py">wallet3</span> <span class="p">=</span> <span class="mf">0.02</span><span class="p">.</span><span class="nc">BTC</span> <span class="p">+</span> <span class="mi">100</span><span class="p">.</span><span class="nc">USDT</span> <span class="p">+</span> <span class="mf">0.1</span><span class="p">.</span><span class="nc">ETH</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you add two amounts together you&#8217;ll always get a new <code>Wallet</code> instance back, even if the two amounts have the same currency.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exchangerates">ExchangeRates</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>ExchangeRates</code> is an interface that supports the conversion of an amount from one currency to another one. Although you can invoke the API of an implementation directly, typically you would use the <code>convert</code> method of an <code>Amount</code> or <code>Wallet</code> instance.</p>
</div>
<div class="paragraph">
<p>The <code>Config.exchangeRates</code> property is used by the components to perform the actual conversion. So you can change this property and all code from now on will use this new implementation.</p>
</div>
<div class="paragraph">
<p>The <code>ExchangeRates</code> interface also supports different rates at different moments in time, but it depends on the actual implementation if the provided time parameter is taken into consideration. One of the implementations that comes out of the box with roboquant, is the <code>ECBExchangeRates</code> which contains daily exchange rates for most fiat currencies from the year 2000 onwards.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="kotlin"><span class="nc">Config</span><span class="p">.</span><span class="n">exchangeRates</span> <span class="p">=</span> <span class="nc">ECBExchangeRates</span><span class="p">.</span><span class="nf">fromWeb</span><span class="p">()</span>
<span class="kd">val</span> <span class="py">amountEUR</span> <span class="p">=</span> <span class="mi">20</span><span class="p">.</span><span class="nc">EUR</span>
<span class="kd">val</span> <span class="py">amountUSD</span> <span class="p">=</span> <span class="n">amountEUR</span><span class="p">.</span><span class="nf">convert</span><span class="p">(</span><span class="nc">Currency</span><span class="p">.</span><span class="nc">USD</span><span class="p">)</span>

<span class="kd">val</span> <span class="py">wallet</span> <span class="p">=</span> <span class="mi">20</span><span class="p">.</span><span class="nc">USD</span> <span class="p">+</span> <span class="mi">1000</span><span class="p">.</span><span class="nc">JPY</span>
<span class="kd">val</span> <span class="py">amountGBP1</span> <span class="p">=</span> <span class="n">wallet</span><span class="p">.</span><span class="nf">convert</span><span class="p">(</span><span class="nc">Currency</span><span class="p">.</span><span class="nc">GBP</span><span class="p">)</span>
<span class="kd">val</span> <span class="py">time</span> <span class="p">=</span> <span class="nc">Instant</span><span class="p">.</span><span class="nf">now</span><span class="p">()</span> <span class="p">-</span> <span class="mi">2</span><span class="p">.</span><span class="n">years</span>
<span class="kd">val</span> <span class="py">amountGBP2</span> <span class="p">=</span> <span class="n">wallet</span><span class="p">.</span><span class="nf">convert</span><span class="p">(</span><span class="nc">Currency</span><span class="p">.</span><span class="nc">GBP</span><span class="p">,</span> <span class="n">time</span><span class="p">)</span>
<span class="nf">require</span><span class="p">(</span><span class="n">amountGBP1</span> <span class="p">!=</span> <span class="n">amountGBP2</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

<footer class="bg-dark py-4 mt-auto">
    <div class="container px-5">
        <div class="row align-items-center justify-content-between flex-column flex-sm-row">
            <div class="col-auto"><div class="small m-0 text-white">Copyright &copy; roboquant.org 2021</div></div>
            <div class="col-auto">
                <a class="link-light small" href="/community.html">Contact</a>
            </div>
        </div>
    </div>
</footer>
<!-- Bootstrap core JS-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script>

    </body>
</html>
