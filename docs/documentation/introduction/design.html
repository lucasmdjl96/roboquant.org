<!DOCTYPE html>
<html lang="en">
     <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="roboquant algo-trading framework" />
    <meta name="keywords" content="trading Kotlin algo roboquant">
    <meta name="theme-color" content="#3296C8">
    <title>roboquant - Design Decisions</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="/img/favicon.png" />
    <!-- Font awesome icons-->
    <link href="/css/asciidoctor.css" rel="stylesheet" />
    <link href="/css/rouge_github.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/v4-shims.css" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="/css/styles.css" rel="stylesheet" />
</head>    <body class="d-flex flex-column">
        <main class="flex-shrink-0">
            <!-- Navigation-->
 <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container px-5">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                <li class="nav-item"><a class="nav-link" href="/index.html">Home</a></li>
                <li class="nav-item"><a class="nav-link" href="/get_started.html">Get Started</a></li>
                <li class="nav-item"><a class="nav-link" href="/documentation/introduction/index.html">Documentation</a></li>
                <li class="nav-item"><a class="nav-link" href="/screenshots.html">Screenshots</a></li>
                <li class="nav-item"><a class="nav-link" href="/community.html">Community</a></li>
            </ul>
        </div>
    </div>
</nav>              <header class="masthead bg-primary text-white text-center">
                     <div class="container d-flex align-items-center flex-column">

                         <div class="row gx-5">
                            <div class="col-lg-4 mb-5 mb-lg-0">
                                <img class="mb-2 masthead-avatar" src="/img/avatar.png" alt="roboquant avatar">
                            </div>
                            <div class="col-lg-8">
                                <h3 class="masthead-subheading font-weight-light mt-3">Design Decisions</h3>
                            </div>
                         </div>

                     </div>
                 </header>
            <!-- Page content-->
            <section class="py-5">
                <div class="container px-5 my-1">
                    <div class="row gx-5">
                        <div class="col-lg-4 mb-5 mb-lg-0">
<nav id="sidebar">
    <h3>Documentation</h3>
        <details open>
            <summary>introduction</summary>
            <ul class="nav flex-column">
                         <li class="nav-item">
                            <a href="/documentation/introduction/index.html" class="nav-link">Welcome</a>
                         </li>
                         <li class="nav-item">
                            <a href="/documentation/introduction/events.html" class="nav-link">Event Driven</a>
                         </li>
                         <li class="nav-item">
                            <a href="/documentation/introduction/features.html" class="nav-link">Features</a>
                         </li>
                         <li class="nav-item">
                            <a href="/documentation/introduction/four_stages.html" class="nav-link">Four Stages</a>
                         </li>
                         <li class="nav-item">
                            <a href="/documentation/introduction/design.html" class="nav-link">Design Decisions</a>
                         </li>
            </ul>
        </details>
        <details close>
            <summary>installation</summary>
            <ul class="nav flex-column">
                         <li class="nav-item">
                            <a href="/documentation/installation/index.html" class="nav-link">Installation</a>
                         </li>
            </ul>
        </details>
        <details close>
            <summary>roboquant</summary>
            <ul class="nav flex-column">
                         <li class="nav-item">
                            <a href="/documentation/roboquant/index.html" class="nav-link">Roboquant</a>
                         </li>
            </ul>
        </details>
        <details close>
            <summary>feed</summary>
            <ul class="nav flex-column">
                         <li class="nav-item">
                            <a href="/documentation/feed/avro.html" class="nav-link">Avro</a>
                         </li>
                         <li class="nav-item">
                            <a href="/documentation/feed/csv.html" class="nav-link">CSV Feed</a>
                         </li>
                         <li class="nav-item">
                            <a href="/documentation/feed/event.html" class="nav-link">Event</a>
                         </li>
                         <li class="nav-item">
                            <a href="/documentation/feed/index.html" class="nav-link">Feed</a>
                         </li>
            </ul>
        </details>
        <details close>
            <summary>strategy</summary>
            <ul class="nav flex-column">
                         <li class="nav-item">
                            <a href="/documentation/strategy/index.html" class="nav-link">Strategy</a>
                         </li>
                         <li class="nav-item">
                            <a href="/documentation/strategy/signal.html" class="nav-link">Signal</a>
                         </li>
            </ul>
        </details>
        <details close>
            <summary>policy</summary>
            <ul class="nav flex-column">
                         <li class="nav-item">
                            <a href="/documentation/policy/index.html" class="nav-link">Policy</a>
                         </li>
                         <li class="nav-item">
                            <a href="/documentation/policy/order.html" class="nav-link">Orders</a>
                         </li>
            </ul>
        </details>
        <details close>
            <summary>metrics</summary>
            <ul class="nav flex-column">
                         <li class="nav-item">
                            <a href="/documentation/metrics/index.html" class="nav-link">Metrics</a>
                         </li>
                         <li class="nav-item">
                            <a href="/documentation/metrics/metrics_logger.html" class="nav-link">Metrics Logger</a>
                         </li>
            </ul>
        </details>
        <details close>
            <summary>integration</summary>
            <ul class="nav flex-column">
                         <li class="nav-item">
                            <a href="/documentation/integration/alpaca.html" class="nav-link">Alpaca</a>
                         </li>
                         <li class="nav-item">
                            <a href="/documentation/integration/crypto.html" class="nav-link">Crypto Exchanges</a>
                         </li>
                         <li class="nav-item">
                            <a href="/documentation/integration/ibkr.html" class="nav-link">Interactive Brokers</a>
                         </li>
                         <li class="nav-item">
                            <a href="/documentation/integration/iex.html" class="nav-link">IEX Cloud</a>
                         </li>
                         <li class="nav-item">
                            <a href="/documentation/integration/index.html" class="nav-link">Overview</a>
                         </li>
                         <li class="nav-item">
                            <a href="/documentation/integration/oanda.html" class="nav-link">OANDA</a>
                         </li>
            </ul>
        </details>
</nav>                         </div>
                        <div class="col-lg-8">
                            <div class="col h-100">
                                <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This document provides an overview of the high level design choices, and the rational why they were made. It is provided mainly as background information. And it can also help to decide if roboquant is the right solution for you.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_develop_a_new_platform">Why develop a new platform</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before we start developing roboquant, we of course looked at existing frameworks and platforms to see if these could fit the bill. However, for our specific use-cases none of them checked the boxes that we required:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Trade assets in multiple currencies at the same time</p>
</li>
<li>
<p>Support many asset classes including cryptocurrencies</p>
</li>
<li>
<p>Solid live trading, including support for advanced order types to reduce risk</p>
</li>
<li>
<p>Deal with large volumes of data and run extensive back-tests</p>
</li>
<li>
<p>Support for trading in multiple markets in different regions at the same time</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_use_kotlin">Why use Kotlin</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are many computer languages available to choose from. After having developed several prototypes in different languages,
we decided to go with Kotlin. Some main benefits being:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Easy to learn and use with excellent tooling support</p>
</li>
<li>
<p>It is very concise with almost no boilerplate code required</p>
</li>
<li>
<p>You can use it both within Jupyter Notebooks and traditional IDE&#8217;s</p>
</li>
<li>
<p>Fast enough to even handle the largest data sets during back testing</p>
</li>
<li>
<p>Access to the huge Java ecosystem with a library available for almost any task at hand</p>
</li>
<li>
<p>Excellent for building robust software, a necessity when developing complex trading strategies and your own money is at risk</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_why_not_python">Why not Python</h3>
<div class="paragraph">
<p>One often asked question is "Why didn&#8217;t you use Python instead?". The truth to be said, we would have loved to be able
to use Python. However, during the prototype phase we discovered that the performance was lacking too much for our
use-cases. This was including using libraries like Numpy and Pandas and even some Cython to speedup processing
where possible.</p>
</div>
<div class="paragraph">
<p>The main reason for this lackluster performance is not only the language itself. But also the fact that using all
the cores found on modern CPU&#8217;s is difficult to do with Python without a lot of overhead.</p>
</div>
<div class="paragraph">
<p>The good news is that if you really want to stick with Python, there are plenty of alternatives available. For example,
you could have a look at backtrader, pyalgotrade or zipline.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_interactive_and_traditional_development">Interactive and traditional development</h2>
<div class="sectionbody">
<div class="paragraph">
<p>From the start we developed <em>roboquant</em> to be used either as a library included in your application or interactively from a Jupyter notebook. The various API&#8217;s have been designed so that they support both use-cases.</p>
</div>
<div class="paragraph">
<p>Where many Java based applications require a lot of ceremony to implement even the simplest piece of functionality, <em>roboquant</em> it designed to remove most of that. Especially in a Jupyter notebook environment, it is very easy to get started. Because of this the API exposed by roboquant follows certain rules:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Minimize need for imports, for example don&#8217;t expose third party types if it can be avoided</p>
</li>
<li>
<p>Use sensible defaults for method parameters where possible</p>
</li>
<li>
<p>Use informative toString() implementations and explanatory exception messages</p>
</li>
<li>
<p>Provide overloaded convenience methods if it makes life easier for the user of the API</p>
</li>
<li>
<p>Use a flat package structure, so any import is simple to remember</p>
</li>
<li>
<p>Leverage type inference where possible so no additional type info needs to be provided</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_modules">Modules</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to keep the project manageable and also reduce the download sizes, roboquant is divided into a number
of distinct modules:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>roboquant-core: all the functionality required for back testing a strategy</p>
</li>
<li>
<p>roboquant-extra: adds support for data feeds and 3rd party brokers</p>
</li>
<li>
<p>roboquant-crypto: adds support for cryptocurrency feeds and exchanges</p>
</li>
<li>
<p>roboquant-ml: adds support for machine learning strategies. This is a huge module because the dependent packages tend to be very large. Right now, this module is not published yet.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This approach allows people with limited hardware to only load the modules required.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_time_handling">Time handling</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When testing strategies that trade simultaneously in multiple time-zones, like stocks in New York and London, it is key to have proper time management. Otherwise, you run the risk that your strategy performs very well but only because it can peep into the future due to faulty handling of time-zones.</p>
</div>
<div class="paragraph">
<p>Because of that, roboquant internally only uses the Java Instant type to represent a moment in time. So all time events can be easily compared without having to consider time zones.</p>
</div>
<div class="paragraph">
<p>When importing data, there is functionality to convert the data from timezone specific value towards the Instant type. When displaying time related information, it can be converted back the other way around if desired.</p>
</div>
<div class="paragraph">
<p>But the fact remains that all internal logic relies only on the Instant type in order to prevent timezone mistakes from happening.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_performance">Performance</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With data sets growing, it is important that a strategy can still be quickly evaluated and tuned when required. If this develop-test cycle becomes too slow, it is nearly impossible to create high performing strategies.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Roboquant isn&#8217;t setup to be a ledger and does not require the same accuracy when it comes to trading data. The native Double type provides enough precision for any trading purpose and there is no need to use (the much slower and memory hungry) BigDecimal type.</p>
</li>
<li>
<p>The data Feed API supports data that is kept in-memory as well data that is stored on disk and only accessed when required. This allows for running back test where the test data doesn&#8217;t fit in memory or running back-tests on machines with limited memory. In fact roboquant can be used on a JVM with only 512 MB of heap allocated.</p>
</li>
<li>
<p>Many of the builtin features support multi-core machines to speedup processing. For example the CSV parser can parse CSV files in parallel so even directories with thousands of CSV files can be parsed in seconds.</p>
</li>
<li>
<p>Avoid (auto)boxing, so the JVM can access these variables directly. This means where possible use native types and not the wrapper one. See <a href="https://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html">background</a></p>
</li>
<li>
<p>Overall the latency is kept very low when processing a new event and generating a signal and order. So it is feasible to create fast, low latency (sub-second) trading strategies.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_reliability">Reliability</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Even more important than performance, is reliability when it comes to trading software.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>All components can log information that is then available for audit and tracing</p>
</li>
<li>
<p>Type and null checks where possible to leverage the compiler to identify possible mistakes</p>
</li>
<li>
<p>Extensive error logging to alert possible issues, including data quality</p>
</li>
<li>
<p>Assert/requires to validate input parameters</p>
</li>
<li>
<p>Good unit test suite to cover much of the code base</p>
</li>
<li>
<p>Proven third party libraries</p>
</li>
</ul>
</div>
</div>
</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
        <!-- Footer-->
<footer class="bg-dark py-4 mt-auto">
    <div class="container px-5">
        <div class="row align-items-center justify-content-between flex-column flex-sm-row">
            <div class="col-auto"><div class="small m-0 text-white">Copyright &copy; roboquant.org 2021</div></div>
            <div class="col-auto">
                <a class="link-light small" href="/community.html">Contact</a>
            </div>
        </div>
    </div>
</footer>
<!-- Bootstrap core JS-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script>

    </body>
</html>
